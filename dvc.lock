schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/cnnClassifier/pipeline/s1_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 3c1e33fab7f5409ff2f45fffd67b5aba
      size: 789
    - path: src/cnnClassifier/pipeline/s1_data_ingestion.py
      hash: md5
      md5: 99e9eb857748c35cbb9e5142e4fe8650
      size: 2226
    outs:
    - path: artifacts/data_ingestion
      hash: md5
      md5: 419ce739aad9b37ec966baf752485afe.dir
      size: 131565742
      nfiles: 486
  prepare_base_model:
    cmd: python src/cnnClassifier/pipeline/s2_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 3c1e33fab7f5409ff2f45fffd67b5aba
      size: 789
    - path: src/cnnClassifier/pipeline/s2_prepare_base_model.py
      hash: md5
      md5: d73c59bdc71e214a86926284718311d9
      size: 2270
    params:
      params.yaml:
        CLASSES: 2
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE: 0.0003
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 8ee2e8ac7fc63ac6ad0cf30445bdf984.dir
      size: 118073536
      nfiles: 2
  training:
    cmd: python src/cnnClassifier/pipeline/s3_model_trainer.py
    deps:
    - path: artifacts/data_ingestion
      hash: md5
      md5: 419ce739aad9b37ec966baf752485afe.dir
      size: 131565742
      nfiles: 486
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 8ee2e8ac7fc63ac6ad0cf30445bdf984.dir
      size: 118073536
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: 3c1e33fab7f5409ff2f45fffd67b5aba
      size: 789
    - path: src/cnnClassifier/pipeline/s3_model_trainer.py
      hash: md5
      md5: 6ec55f3955b9ecfe917352556b68fe5e
      size: 926
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 16
        EPOCHS: 5
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: artifacts/training/model.h5
      hash: md5
      md5: 101d62cb76a70a35ff973e009c85be8c
      size: 59147464
  evaluation:
    cmd: python src/cnnClassifier/pipeline/s4_mlflow_Evaluation.py
    deps:
    - path: artifacts/data_ingestion
      hash: md5
      md5: 419ce739aad9b37ec966baf752485afe.dir
      size: 131565742
      nfiles: 486
    - path: artifacts/training/model.h5
      hash: md5
      md5: 101d62cb76a70a35ff973e009c85be8c
      size: 59147464
    - path: config/config.yaml
      hash: md5
      md5: 3c1e33fab7f5409ff2f45fffd67b5aba
      size: 789
    - path: src/cnnClassifier/pipeline/s4_mlflow_Evaluation.py
      hash: md5
      md5: 90e4f1a8b1c4fe13c49409e84e4c5c05
      size: 1592
    params:
      params.yaml:
        BATCH_SIZE: 16
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: scores.json
      hash: md5
      md5: 54d052e07634df27d51a2401f2abe00b
      size: 74
